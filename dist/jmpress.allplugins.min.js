/*!
 * plugin for jmpress.js v0.4.5
 * http://jmpressjs.github.com/jmpress.js
 *
 * Copyright 2016 Kyle Robinson Young @shama & Tobias Koppers @sokra
 * Licensed MIT
 * http://www.opensource.org/licenses/mit-license.php
 */
!function(a,b,c,d){"use strict";a.jmpress("register","toggle",function(c,d,e){var f=this;a(b).bind("keydown",function(b){b.keyCode===c&&(a(f).jmpress("initialized")?a(f).jmpress("deinit"):a(f).jmpress(d))}),e&&a(f).jmpress(d)})}(jQuery,document,window),function(a,b,c,d){"use strict";function e(b,c,d){if(b.secondary&&b.secondary.split(" ").indexOf(c)!==-1){for(var e in b)if(e.length>9&&0===e.indexOf("secondary")){var f=b[e],g=e.substr(9);g=g.substr(0,1).toLowerCase()+g.substr(1),b[e]=b[g],b[g]=f}a(this).jmpress("reapply",a(d))}}a.jmpress("initStep",function(a,b){for(var c in b.data)0===c.indexOf("secondary")&&(b.stepData[c]=b.data[c])}),a.jmpress("beforeActive",function(b,c){function d(b,d){var f=a(d).data("stepData");e.call(c.jmpress,f,"grandchildren",d)}e.call(c.jmpress,a(b).data("stepData"),"self",b);var f=a(b).parent();a(f).children(c.settings.stepSelector).each(function(b,d){var f=a(d).data("stepData");e.call(c.jmpress,f,"siblings",d)});for(var g=1;g<c.parents.length;g++)a(c.parents[g]).children(c.settings.stepSelector).each(d)}),a.jmpress("setInactive",function(b,c){function d(b,d){var f=a(d).data("stepData");e.call(c.jmpress,f,"grandchildren",d)}e.call(c.jmpress,a(b).data("stepData"),"self",b);var f=a(b).parent();a(f).children(c.settings.stepSelector).each(function(b,d){var f=a(d).data("stepData");e.call(c.jmpress,f,"siblings",d)});for(var g=1;g<c.parents.length;g++)a(c.parents[g]).children(c.settings.stepSelector).each(d)})}(jQuery,document,window),function(a,b,c,d){"use strict";a.jmpress("defaults").duration={defaultValue:-1,defaultAction:"next",barSelector:d,barProperty:"width",barPropertyStart:"0",barPropertyEnd:"100%"},a.jmpress("initStep",function(a,b){b.stepData.duration=b.data.duration&&parseInt(b.data.duration,10),b.stepData.durationAction=b.data.durationAction}),a.jmpress("setInactive",function(b,c){var d=c.settings,e=d.duration,f=c.current;c.stepData.duration||e.defaultValue;if(f.durationTimeout){if(e.barSelector){var g={transitionProperty:e.barProperty,transitionDuration:"0",transitionDelay:"0",transitionTimingFunction:"linear"};g[e.barProperty]=e.barPropertyStart;var h=a(e.barSelector);a.jmpress("css",h,g),h.each(function(b,c){var d=a(c).next(),e=a(c).parent();a(c).detach(),d.length?d.insertBefore(c):e.append(c)})}clearTimeout(f.durationTimeout),delete f.durationTimeout}}),a.jmpress("setActive",function(b,c){var e=c.settings,f=e.duration,g=c.current,h=c.stepData.duration||f.defaultValue;if(h&&h>0){if(f.barSelector){var i={transitionProperty:f.barProperty,transitionDuration:h-2*e.transitionDuration/3-100+"ms",transitionDelay:2*e.transitionDuration/3+"ms",transitionTimingFunction:"linear"};i[f.barProperty]=f.barPropertyEnd,a.jmpress("css",a(f.barSelector),i)}var j=this;g.durationTimeout&&(clearTimeout(g.durationTimeout),g.durationTimeout=d),g.durationTimeout=setTimeout(function(){var b=c.stepData.durationAction||f.defaultAction;a(j).jmpress(b)},h)}})}(jQuery,document,window),function(a,b,c,d){"use strict";var e=a.jmpress,f="jmpress-presentation-";e("defaults").presentationMode={use:!0,url:"presentation-screen.html",notesUrl:!1,transferredValues:["userZoom","userTranslateX","userTranslateY"]},e("defaults").keyboard.keys[80]="presentationPopup",e("afterInit",function(b,d){var e=d.current;if(e.selectMessageListeners=[],d.settings.presentationMode.use){c.addEventListener("message",function(b){try{if("string"!=typeof b.data||0!==b.data.indexOf(f))return;var g=JSON.parse(b.data.slice(f.length));switch(g.type){case"select":a.each(d.settings.presentationMode.transferredValues,function(a,b){d.current[b]=g[b]}),/[a-z0-9\-]+/i.test(g.targetId)&&typeof g.substep in{number:1,undefined:1}?a(d.jmpress).jmpress("select",{step:"#"+g.targetId,substep:g.substep},g.reason):a.error("For security reasons the targetId must match /[a-z0-9\\-]+/i and substep must be a number.");break;case"listen":e.selectMessageListeners.push(b.source);break;case"ok":clearTimeout(e.presentationPopupTimeout);break;case"read":try{b.source.postMessage(f+JSON.stringify({type:"url",url:c.location.href,notesUrl:d.settings.presentationMode.notesUrl}),"*")}catch(b){a.error("Cannot post message to source: "+b)}break;default:throw"Unknown message type: "+g.type}}catch(b){a.error("Received message is malformed: "+b)}});try{c.parent&&c.parent!==c&&c.parent.postMessage(f+JSON.stringify({type:"afterInit"}),"*")}catch(b){a.error("Cannot post message to parent: "+b)}}}),e("afterDeinit",function(b,d){if(d.settings.presentationMode.use)try{c.parent&&c.parent!==c&&c.parent.postMessage(f+JSON.stringify({type:"afterDeinit"}),"*")}catch(b){a.error("Cannot post message to parent: "+b)}}),e("setActive",function(b,c){var d=a(c.delegatedFrom).attr("id"),e=c.substep,g=c.reason;a.each(c.current.selectMessageListeners,function(b,h){try{var i={type:"select",targetId:d,substep:e,reason:g};a.each(c.settings.presentationMode.transferredValues,function(a,b){i[b]=c.current[b]}),h.postMessage(f+JSON.stringify(i),"*")}catch(b){a.error("Cannot post message to listener: "+b)}})}),e("register","presentationPopup",function(){function b(){e.jmpress("current").presentationPopupTimeout=setTimeout(b,100);try{d.postMessage(f+JSON.stringify({type:"url",url:c.location.href,notesUrl:e.jmpress("settings").presentationMode.notesUrl}),"*")}catch(a){}}var d,e=a(this);e.jmpress("settings").presentationMode.use&&(d=c.open(a(this).jmpress("settings").presentationMode.url),e.jmpress("current").presentationPopupTimeout=setTimeout(b,100))})}(jQuery,document,window);